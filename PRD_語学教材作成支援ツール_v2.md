# 語学教材作成支援ツール PRD v2.0
## 本格的量産・品質管理システム

### 📋 **エグゼクティブサマリー**

語学サポートデスクの教材作成を**完全自動化・量産化**し、品質管理機能を統合した企業向けソリューション。コンテキスト管理、テンプレート設定、一括生成、品質チェック機能を備えた包括的システム。

---

## 🎯 **新システム概要**

### **1. コンテキスト管理システム**
```
📁 contexts/
├── 📄 counseling_notes/          # カウンセリングメモ
│   ├── client_A_profile.md
│   ├── client_B_requirements.md
│   └── ...
├── 📄 teaching_policies/         # 教務方針
│   ├── level_standards.md
│   ├── expression_guidelines.md
│   └── difficulty_criteria.md
└── 📄 industry_contexts/         # 業界別コンテキスト
    ├── finance_sector.md
    ├── tech_industry.md
    └── ...
```

### **2. テンプレート管理システム**
```
📁 templates/
├── 📄 roleplay_template.json     # ロールプレイ構造定義
├── 📄 discussion_template.json   # ディスカッション構造定義
├── 📄 expression_template.json   # 表現練習構造定義
└── 📄 custom_templates/          # カスタムテンプレート
```

### **3. 一括生成・品質管理システム**
```
📁 batch_outputs/
├── 📄 2025-01-27_batch_001/
│   ├── materials/               # 生成教材
│   ├── quality_report.json     # 品質チェック結果
│   └── duplicate_analysis.json # 重複分析
```

---

## 🚀 **機能要件**

### **Phase 1: コンテキスト・テンプレート管理**

#### **1.1 コンテキスト管理**
- ✅ フォルダベースのコンテキスト管理
- ✅ カウンセリングメモの構造化保存
- ✅ 教務方針・レベル基準の設定
- ✅ 業界別コンテキストの管理

#### **1.2 テンプレート設計**
- ✅ JSONベースのテンプレート定義
- ✅ 各教材タイプの構造カスタマイズ
- ✅ 出力フォーマットの統一
- ✅ 難易度レベル別のテンプレート

### **Phase 2: 一括生成システム**

#### **2.1 テーマ・トピック管理**
- ✅ テーマリストの一括インポート
- ✅ コンテキストベースのトピック展開
- ✅ 複数選択による一括生成
- ✅ 生成優先度の設定

#### **2.2 バッチ処理**
- ✅ 20件以上の同時生成
- ✅ 進捗モニタリング
- ✅ エラーハンドリング・リトライ
- ✅ 生成履歴の管理

### **Phase 3: 品質管理システム**

#### **3.1 重複チェック**
- ✅ 表現・語彙の重複検出
- ✅ シチュエーションの類似度分析
- ✅ テンプレート構造の一貫性チェック
- ✅ 重複度スコアの算出

#### **3.2 難易度・品質チェック**
- ✅ CEFR/TOEICレベル自動判定
- ✅ 語彙難易度の分析
- ✅ 文法複雑度の評価
- ✅ 内容の現実性チェック

#### **3.3 承認ワークフロー**
- ✅ 監督者レビュー機能
- ✅ 修正提案・フィードバック
- ✅ 承認済み教材の管理
- ✅ バージョン管理

---

## 🛠 **技術アーキテクチャ v2.0**

### **バックエンド強化**
```python
📁 backend/
├── 📄 context_manager.py        # コンテキスト管理
├── 📄 template_engine.py        # テンプレート処理
├── 📄 batch_processor.py        # 一括生成エンジン
├── 📄 quality_checker.py        # 品質管理システム
├── 📄 workflow_manager.py       # 承認ワークフロー
└── 📄 database.py              # データ永続化
```

### **フロントエンド拡張**
```python
📁 frontend/
├── 📄 context_management.py     # コンテキスト設定UI
├── 📄 template_designer.py      # テンプレート設計UI
├── 📄 batch_generator.py        # 一括生成UI
├── 📄 quality_dashboard.py      # 品質管理ダッシュボード
└── 📄 approval_workflow.py      # 承認フローUI
```

---

## 📊 **データ構造**

### **コンテキストファイル例**
```markdown
# クライアントプロファイル: 金融業界A社

## 基本情報
- 業界: 金融サービス
- 規模: 中規模（従業員500名）
- 主要業務: 法人向け融資

## 学習者特性
- 平均レベル: TOEIC 600-750
- 主要シーン: 顧客対応、社内会議
- 重点領域: 専門用語、数値説明

## 教務方針
- 実用性重視
- 専門用語は段階的導入
- ケーススタディ中心
```

### **テンプレート例**
```json
{
  "template_id": "roleplay_finance",
  "name": "金融業界ロールプレイ",
  "structure": {
    "model_dialogue": {
      "length": "150-200 words",
      "participants": 2,
      "context_integration": true
    },
    "useful_expressions": {
      "count": "8-12",
      "difficulty": "intermediate",
      "industry_specific": true
    },
    "additional_questions": {
      "count": 3,
      "type": "application_focused"
    }
  },
  "quality_criteria": {
    "realism_score": ">= 4.0",
    "difficulty_match": true,
    "vocabulary_level": "B2-C1"
  }
}
```

---

## 🎪 **新しいUI設計**

### **メインダッシュボード**
```
🏠 ダッシュボード
├── 📊 今月の生成統計
├── ⚠️ 品質アラート
├── 📋 承認待ち教材
└── 🎯 進行中バッチ

📁 コンテキスト管理
├── 📝 カウンセリングメモ
├── 📋 教務方針設定
├── 🏢 業界別設定
└── 📊 利用統計

🎨 テンプレート設計
├── 🎭 ロールプレイ設定
├── 💬 ディスカッション設定
├── 📈 表現練習設定
└── ➕ カスタムテンプレート

⚡ 一括生成
├── 📋 テーマリスト管理
├── 🎯 一括生成設定
├── 📊 進捗モニタリング
└── 📁 生成履歴

🔍 品質管理
├── 🔄 重複チェック
├── 📊 難易度分析
├── ✅ 品質スコア
└── 👥 承認ワークフロー
```

---

## 📈 **実装ロードマップ**

### **Week 1-2: 基盤システム**
- ✅ コンテキスト管理システム
- ✅ テンプレートエンジン
- ✅ データベース設計

### **Week 3-4: 一括生成**
- ✅ バッチ処理エンジン
- ✅ 進捗管理システム
- ✅ エラーハンドリング

### **Week 5-6: 品質管理**
- ✅ 重複検出アルゴリズム
- ✅ 難易度分析システム
- ✅ 品質スコアリング

### **Week 7-8: ワークフロー**
- ✅ 承認システム
- ✅ フィードバック機能
- ✅ バージョン管理

---

## 🎯 **期待される効果**

### **効率性**
- **生成時間**: 2時間 → 10分（20教材一括）
- **品質チェック**: 10分 → 2分（自動化）
- **全体プロセス**: 80% 時間短縮

### **品質向上**
- 重複率: < 5%
- テンプレート一貫性: 95%+
- 難易度精度: 90%+

### **スケーラビリティ**
- 月間生成能力: 20件 → 200件+
- 同時進行プロジェクト: 複数対応
- チーム拡張: 容易

---

いかがでしょうか？現在のMVPから、この本格的なシステムに発展させますか？ 